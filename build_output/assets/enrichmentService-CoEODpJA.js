import{p}from"./index-DDih6Wbm.js";const l="https://en.wikipedia.org/w/api.php",m="https://api.gbif.org/v1",f="https://api.inaturalist.org/v1",$={async searchGBIF(a){try{const n=await(await fetch(`${m}/species/match?name=${encodeURIComponent(a)}`)).json();if(!n.usageKey)return null;const t=await(await fetch(`${m}/species/${n.usageKey}`)).json();return{scientificName:t.scientificName,taxonomy:{kingdom:t.kingdom,phylum:t.phylum,order:t.order,family:t.family,genus:t.genus}}}catch(e){return console.warn("GBIF Search Failed",e),null}},async searchWikipedia(a){var e,n,o,t;try{const c=`${l}?action=query&list=search&srsearch=${encodeURIComponent(a)}&format=json&origin=*`,s=await(await fetch(c)).json();if(!((n=(e=s.query)==null?void 0:e.search)!=null&&n.length))return null;const r=s.query.search[0].title,u=`${l}?action=query&prop=extracts&exintro&explaintext&titles=${encodeURIComponent(r)}&format=json&origin=*`,i=(o=(await(await fetch(u)).json()).query)==null?void 0:o.pages,h=Object.keys(i)[0];return{description:(t=i[h])==null?void 0:t.extract,commonName:r}}catch(c){return console.warn("Wiki Search Failed",c),null}},async searchiNaturalist(a){var e;try{const n=`${f}/taxa?q=${encodeURIComponent(a)}`,t=await(await fetch(n)).json();if(!((e=t.results)!=null&&e.length))return null;const c=t.results[0];return{commonName:c.preferred_common_name,scientificName:c.name,images:c.default_photo?[c.default_photo.medium_url]:[]}}catch(n){return console.warn("iNaturalist Search Failed",n),null}},async scrapeAquasabi(a){try{const e=p.search(a);return e?(console.log(`[Enrichment] Found local match for "${a}": ${e.name}`),{scientificName:e.scientificName||e.traits["Complete botanical name"],commonName:e.name,description:e.details.description,origin:e.traits.Origin||e.traits.Distribution,images:e.images,tips:e.details.notes}):(console.warn(`[Enrichment] No local match found for "${a}"`),null)}catch(e){return console.warn("Aquasabi Lookup Failed",e),null}}};export{$ as enrichmentService};
